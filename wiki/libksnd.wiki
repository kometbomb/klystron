#summary How to use the libksnd music player library
#labels Phase-Deploy,Featured

*libksnd* is a (Win32) library using native system API (no SDL needed) and optimized for size. The library code is around 34 kilobytes uncompressed so it is suitable for small intros and whatnot. Both static and dynamic linking is supported.

See the [http://code.google.com/p/klystron/downloads/list Downloads] section for binaries.

==Notes==

 * See [http://code.google.com/p/klystron/source/browse/trunk/src/lib/ksnd.h ksnd.h] for the API.
 * Link with libksnd.a for DLL use (needs ksnd.dll)
 * Link with libksndstatic.a for static use (no external dlls needed) - note: you need to link with winmm since it uses Windows waveout stuff
 * You can also include the song as data and use {{{KSND_LoadSongFromMemory()}}} to load the song
 * For VS users: use the .def file to create a .lib from the DLL in case you need it. 

Song loading and playing should be straightforward. See example below:

{{{
#include "ksnd.h"
#include <windows.h>

// Plays Test.kt from the beginning for 5 seconds at full volume, 5 seconds at half volume, pauses for 1 second
// and after unpausing frees allocated stuff and exits.

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR pCmdLine, int nCmdShow)
{
	KPlayer *player;
	KSong * song;
	
	player = KSND_CreatePlayer(44100);
	
	song = KSND_LoadSong(player, "Test.kt");
	
	KSND_PlaySong(player, song, 0);
	
	Sleep(5000);

	KSND_SetVolume(player, 64); // Half volume, range is 0..128

	Sleep(5000);
	
	KSND_Pause(player, 1);
	
	Sleep(1000);
	
	KSND_Pause(player, 0);
	
	Sleep(10000);
		
	KSND_FreePlayer(player);
	KSND_FreeSong(song);
		
	return 0;
}
}}}

Static linking:

{{{
gcc player.c -o player -lksndstatic -lwinmm
}}}

Dynamic linking:

{{{
gcc player.c -o player -lksnd 
}}}